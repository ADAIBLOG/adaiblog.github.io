<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>家庭网络级解决方案:AdguardHome | 阿呆的博客</title><meta name="keywords" content="网络,Docker"><meta name="author" content="阿呆"><meta name="copyright" content="阿呆"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="家庭网络级解决方案:AdguardHome"><meta name="application-name" content="家庭网络级解决方案:AdguardHome"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="家庭网络级解决方案:AdguardHome"><meta property="og:url" content="https://www.adaiblog.github.io/posts/adguardhome.html"><meta property="og:site_name" content="阿呆的博客"><meta property="og:description" content="本指南详细介绍如何在 Debian 系统或 Docker 中部署 AdGuard Home，为您的家庭网络提供全面的广告拦截、恶意软件防护、家长内容控制以及详尽的设备网络活动监控，打造更清洁、更安全的上网环境。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.adaiblog.github.io/img/posts/adguard/adguardhome.webp"><meta property="article:author" content="阿呆"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.adaiblog.github.io/img/posts/adguard/adguardhome.webp"><meta name="description" content="本指南详细介绍如何在 Debian 系统或 Docker 中部署 AdGuard Home，为您的家庭网络提供全面的广告拦截、恶意软件防护、家长内容控制以及详尽的设备网络活动监控，打造更清洁、更安全的上网环境。"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.adaiblog.github.io/posts/adguardhome.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><meta name="google-site-verification" content="q3O-oXp0HqjlNmTQV6dyggATm1jPJlwNbt2uHEvOjG8"/><meta name="baidu-site-verification" content="codeva-Gyrmhrczb1"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-9290198692800874',
  enable_page_level_ads: 'true'
});</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-NCXTYTWYNM"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-NCXTYTWYNM');
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo.adai.fun',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":1},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 阿呆","link":"链接: ","source":"来源: 阿呆的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '阿呆的博客',
  title: '家庭网络级解决方案:AdguardHome',
  postAI: '',
  pageFillDescription: '在 Debian 系统上搭建 AdGuard Home 的完整教程, 环境准备, 1. 系统要求, 2. 更新系统包, 部署 AdGuard Home, 1. 下载 AdGuard Home, 1. 选择自动安装方式, 2. 如果系统启用防火墙需手动开放端口：, 控制指令, 首次配置, 1. 访问管理界面, 2. 初始设置步骤, 关键配置说明, 1. 广告拦截规则, 2. 家长控制, 3. 网络监控, 更新和卸载, 常见问题, 1. 无法访问管理界面, 2. 集成到路由器在系统上搭建的完整教程环境准备系统要求操作系统系统硬件要求对内存和要求较低适合在小型设备如树莓派上运行网络要求公网可选用于远程管理更新系统包部署下载自动安装选择自动安装方式如果系统启用防火墙需手动开放端口监听端口默认和管理端口默认安装拉取镜像创建并运行容器参数说明指定容器名称为方便后续通过名称管理容器如启动停止删除等设置容器重启策略除非手动停止否则容器退出时自动重启确保服务持续运行挂载主机目录到容器工作目录主机目录容器内用于持久化存储的工作数据如过滤规则查询日志缓存等挂载主机目录到容器配置目录主机目录容器内用于持久化存储配置文件如避免容器删除后配置丢失映射服务端口主机端口容器端口是协议默认端口作为服务器需监听此端口处理域名解析请求映射服务端口主机端口容器端口是服务器端口是客户端端口启用的功能时需要映射端口主机端口容器端口用于处理请求如管理界面的访问广告过滤的请求拦截等映射及相关加密端口主机端口容器端口用于协议管理界面的访问可能用于等加密通信映射初始配置界面端口主机端口容器端口首次启动时通过此端口访问初始化配置界面如设置管理员账号上游等映射端口主机端口容器端口是的标准端口同时也用于符合规范映射备用加密服务端口主机端口容器端口常用于的备用端口或其他加密管理服务映射性能分析端口主机端口容器端口对应配置中用于的性能分析和调试如语言的工具表示后台运行容器是使用的镜像名称控制指令启动停止删除安装和创建编写按保存指定文件格式版本兼容大多数现代环境定义服务名称为使用官方最新镜像指定容器名称便于通过名称管理如启动停止容器重启策略除非手动停止否则退出后自动重启保证服务持续运行使用命名卷存储数据无需手动创建主机目录由自动管理命名卷映射到容器工作目录存储过滤规则查询日志缓存等动态数据数据持久化且独立于容器生命周期命名卷映射到容器配置目录存储核心配置文件如确保配置不丢失端口映射主机端口容器端口按需保留或删除普通服务协议普通服务协议主要使用服务器端口如需用作为服务器则保留客户端端口配合服务器使用端口用于管理界面访问广告过滤的请求拦截端口用于加密管理界面访问服务端口支持相关的通信初始化配置端口首次启动时通过此端口访问设置界面配置完成后可关闭服务端口加密协议服务端口基于的加密服务端口另一种加密协议服务的端口调试端口用于性能分析如语言工具非必要可删除定义命名卷会自动在宿主机创建并管理这些卷的存储路径通常在卷名称对应容器内的工作目录存储动态数据卷名称对应容器内的配置目录存储核心配置启动启动容器查看容器状态首次配置访问管理界面本地访问主机地址远程访问你的服务器初始设置步骤选择语言如中文点击阅读并接受服务条款点击设置管理员账户的用户名和密码完成配置后登录管理后台关键配置说明广告拦截规则默认规则系统已预装基础广告过滤规则自定义规则进入输入规则链接例如家长控制内容过滤在中勾选需要屏蔽的类别如成人内容赌博屏幕时间管理在中设置设备可用时间段例如每天网络监控查看实时流量进入查看各设备的连接状态和请求统计更新和卸载自动更新更新停止服务重新运行自动安装脚本重启服务验证版本卸载停止并禁用服务执行卸载命令清理残留文件更新从中拉出新版本停止当前运行的容器移除当前运行的容器再次创建并运行容器如果之前自定义过端口或挂载目录重新创建时务必保持参数一致否则可能导致配置或数据丢失卸载停止当前运行的容器移除当前运行的容器更新拉取最新镜像重新部署容器卸载进入存放的文件夹基础删除保留数据卷仅删除容器和网络彻底删除包括数据卷数据会丢失额外清理删除未使用的镜像常见问题无法访问管理界面开放防火墙端口集成到路由器在路由器设置中将服务器地址指向的例如参考文档官方文档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-02-25 23:49:49',
  postMainColor: '#65be6c',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/custom/css/bilibili.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/custom.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/poem.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/mainColor/heoMainColor.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="阿呆的博客" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/adai.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">阿呆的博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/atom.xml"><i class="anzhiyufont anzhiyu-icon-rss faa-tada" style="font-size: 0.9em;"></i><span> RSS订阅</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/collect/"><i class="anzhiyufont anzhiyu-icon-cube faa-tada" style="font-size: 0.9em;"></i><span> 藏宝阁</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-inbox faa-tada" style="font-size: 0.9em;"></i><span> 好物</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/reward/"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill faa-tada" style="font-size: 0.9em;"></i><span> 赞助名单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 更多链接</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/%5Cimg%5Cwechat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/%5Cimg%5Cwechat.png"/></a><div class="post-qr-code-desc">微信</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AnZhiYu/" style="font-size: 1.05rem;">AnZhiYu<sup>2</sup></a><a href="/tags/Android/" style="font-size: 1.05rem;">Android<sup>2</sup></a><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>7</sup></a><a href="/tags/Github/" style="font-size: 1.05rem;">Github<sup>3</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/HyperOS/" style="font-size: 1.05rem;">HyperOS<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>6</sup></a><a href="/tags/MarkDown/" style="font-size: 1.05rem;">MarkDown<sup>1</sup></a><a href="/tags/Rss/" style="font-size: 1.05rem;">Rss<sup>1</sup></a><a href="/tags/Steam/" style="font-size: 1.05rem;">Steam<sup>1</sup></a><a href="/tags/Windows/" style="font-size: 1.05rem;">Windows<sup>9</sup></a><a href="/tags/%E4%BD%B3%E8%83%BD%E6%89%93%E5%8D%B0%E6%9C%BA/" style="font-size: 1.05rem;">佳能打印机<sup>1</sup></a><a href="/tags/%E4%BF%9D%E9%99%A9/" style="font-size: 1.05rem;">保险<sup>1</sup></a><a href="/tags/%E5%88%A9%E6%B6%A6%E7%8E%87/" style="font-size: 1.05rem;">利润率<sup>1</sup></a><a href="/tags/%E5%8D%81%E4%B8%87%E4%B8%AA%E4%B8%BA%E4%BB%80%E4%B9%88/" style="font-size: 1.05rem;">十万个为什么<sup>1</sup></a><a href="/tags/%E5%8D%8F%E8%AE%AE/" style="font-size: 1.05rem;">协议<sup>2</sup></a><a href="/tags/%E5%A3%81%E7%BA%B8/" style="font-size: 1.05rem;">壁纸<sup>1</sup></a><a href="/tags/%E5%AD%97%E4%BD%93/" style="font-size: 1.05rem;">字体<sup>1</sup></a><a href="/tags/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8/" style="font-size: 1.05rem;">密码管理器<sup>1</sup></a><a href="/tags/%E5%B7%9D%E8%8F%9C/" style="font-size: 1.05rem;">川菜<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%85%B3%E9%9D%A2%E6%9D%BF/" style="font-size: 1.05rem;">开关面板<sup>1</sup></a><a href="/tags/%E6%89%8B%E6%9C%BA%E5%8D%A1/" style="font-size: 1.05rem;">手机卡<sup>1</sup></a><a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size: 1.05rem;">接口<sup>1</sup></a><a href="/tags/%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/" style="font-size: 1.05rem;">本地部署<sup>1</sup></a><a href="/tags/%E6%9F%A5%E6%89%BE%E8%AE%BE%E5%A4%87/" style="font-size: 1.05rem;">查找设备<sup>1</sup></a><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 1.05rem;">浏览器<sup>1</sup></a><a href="/tags/%E6%B8%B8%E6%88%8F%E4%B8%8B%E8%BD%BD/" style="font-size: 1.05rem;">游戏下载<sup>1</sup></a><a href="/tags/%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">游戏服务器<sup>1</sup></a><a href="/tags/%E6%B8%B8%E6%88%8F%E8%AE%BE%E7%BD%AE/" style="font-size: 1.05rem;">游戏设置<sup>1</sup></a><a href="/tags/%E7%90%86%E8%B4%A2/" style="font-size: 1.05rem;">理财<sup>1</sup></a><a href="/tags/%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">生产力工具<sup>3</sup></a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.05rem;">生活<sup>1</sup></a><a href="/tags/%E7%A4%BE%E4%BC%9A%E4%BF%9D%E9%9A%9C/" style="font-size: 1.05rem;">社会保障<sup>1</sup></a><a href="/tags/%E7%A9%BA%E8%B0%83/" style="font-size: 1.05rem;">空调<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>2</sup></a><a href="/tags/%E8%81%8C%E4%B8%9A/" style="font-size: 1.05rem;">职业<sup>1</sup></a><a href="/tags/%E8%8A%82%E6%97%A5/" style="font-size: 1.05rem;">节日<sup>1</sup></a><a href="/tags/%E8%AF%AD%E9%9F%B3%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">语音服务器<sup>2</sup></a><a href="/tags/%E8%AF%AD%E9%9F%B3%E8%BD%AF%E4%BB%B6/" style="font-size: 1.05rem;">语音软件<sup>2</sup></a><a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="font-size: 1.05rem;">路由器<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/" itemprop="url">服务器</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络</span></a><a class="article-meta__tags" href="/tags/Docker/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Docker</span></a></span></div></div><h1 class="post-title" itemprop="name headline">家庭网络级解决方案:AdguardHome</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-02-26T04:29:58.000Z" title="发表于 2025-02-26 12:29:58">2025-02-26</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2026-02-25T15:49:49.237Z" title="更新于 2026-02-25 23:49:49">2026-02-25</time></span></div><div class="meta-secondline"></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/posts/adguard/adguardhome.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.adaiblog.github.io/posts/adguardhome.html"><header><a class="post-meta-categories" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/" itemprop="url">服务器</a><a href="/tags/%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url">网络</a><a href="/tags/Docker/" tabindex="-1" itemprop="url">Docker</a><h1 id="CrawlerTitle" itemprop="name headline">家庭网络级解决方案:AdguardHome</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">阿呆</span><time itemprop="dateCreated datePublished" datetime="2025-02-26T04:29:58.000Z" title="发表于 2025-02-26 12:29:58">2025-02-26</time><time itemprop="dateCreated datePublished" datetime="2026-02-25T15:49:49.237Z" title="更新于 2026-02-25 23:49:49">2026-02-25</time></header><h1 id="在-Debian-系统上搭建-AdGuard-Home-的完整教程"><a href="#在-Debian-系统上搭建-AdGuard-Home-的完整教程" class="headerlink" title="在 Debian 系统上搭建 AdGuard Home 的完整教程"></a>在 Debian 系统上搭建 AdGuard Home 的完整教程</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="1-系统要求"><a href="#1-系统要求" class="headerlink" title="1. 系统要求"></a>1. 系统要求</h3><ul>
<li>​<strong>操作系统</strong>: Linux系统</li>
<li>​<strong>硬件要求</strong>: AdGuard Home 对内存和 CPU 要求较低，适合在小型设备（如树莓派）上运行。</li>
<li>​<strong>网络要求</strong>: 公网 IP（可选，用于远程管理）</li>
</ul>
<h3 id="2-更新系统包"><a href="#2-更新系统包" class="headerlink" title="2. 更新系统包"></a>2. 更新系统包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt upgrade -y  </span><br></pre></td></tr></table></figure>

<h2 id="部署-AdGuard-Home"><a href="#部署-AdGuard-Home" class="headerlink" title="部署 AdGuard Home"></a>部署 AdGuard Home</h2><h3 id="1-下载-AdGuard-Home"><a href="#1-下载-AdGuard-Home" class="headerlink" title="1. 下载 AdGuard Home"></a>1. 下载 AdGuard Home</h3><div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">自动安装</button><button type="button" class="tab " data-href="test4-2">Docker</button><button type="button" class="tab " data-href="test4-3">Docker Compose</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><h3 id="1-选择自动安装方式"><a href="#1-选择自动安装方式" class="headerlink" title="1. 选择自动安装方式"></a>1. 选择自动安装方式</h3><div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">curl</button><button type="button" class="tab " data-href="test4-2">wget</button><button type="button" class="tab " data-href="test4-3">fetch</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-verbose -O - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-3"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch -o - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<h3 id="2-如果系统启用防火墙，需手动开放端口："><a href="#2-如果系统启用防火墙，需手动开放端口：" class="headerlink" title="2. 如果系统启用防火墙，需手动开放端口："></a>2. 如果系统启用防火墙，需手动开放端口：</h3><p>DNS 监听端口（默认 53）和 HTTP 管理端口（默认 3000）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ufw allow 53</span><br><span class="line"><span class="built_in">sudo</span> ufw allow 3000/tcp</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-2"><p>安装<a target="_blank" rel="noopener" href="https://adaiblog.github.io/posts/docker.html">docker</a></p>
<ol>
<li>拉取 Docker 镜像<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull adguard/adguardhome</span><br></pre></td></tr></table></figure></li>
<li>创建并运行容器<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run --name adguardhome\</span><br><span class="line">    --restart unless-stopped\</span><br><span class="line">    -v /my/own/workdir:/opt/adguardhome/work\</span><br><span class="line">    -v /my/own/confdir:/opt/adguardhome/conf\</span><br><span class="line">    -p 53:53/tcp -p 53:53/udp\</span><br><span class="line">    -p 67:67/udp -p 68:68/udp\</span><br><span class="line">    -p 80:80/tcp -p 443:443/tcp -p 443:443/udp -p 3000:3000/tcp\</span><br><span class="line">    -p 853:853/tcp\</span><br><span class="line">    -p 853:853/udp\</span><br><span class="line">    -p 5443:5443/tcp -p 5443:5443/udp\</span><br><span class="line">    -p 6060:6060/tcp\</span><br><span class="line">    -d adguard/adguardhome</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="string">--name</span> <span class="string">adguardhome</span> <span class="string">\</span>  <span class="comment">#指定容器名称为 adguardhome，方便后续通过名称管理容器（如启动、停止、删除等）</span></span><br><span class="line"><span class="string">--restart</span> <span class="string">unless-stopped</span> <span class="string">\</span>  <span class="comment">#设置容器重启策略：除非手动停止，否则容器退出时自动重启（确保服务持续运行）</span></span><br><span class="line"><span class="string">-v</span> <span class="string">/my/own/workdir:/opt/adguardhome/work</span> <span class="string">\</span> <span class="comment">#挂载主机目录到容器工作目录：主机目录 /my/own/workdir &lt;-&gt; 容器内 /opt/adguardhome/work 用于持久化存储 AdGuard Home 的工作数据（如过滤规则、查询日志、缓存等）</span></span><br><span class="line"><span class="string">-v</span> <span class="string">/my/own/confdir:/opt/adguardhome/conf</span> <span class="string">\</span> <span class="comment">#挂载主机目录到容器配置目录：主机目录 /my/own/confdir &lt;-&gt; 容器内 /opt/adguardhome/conf 用于持久化存储配置文件（如 AdGuardHome.yaml），避免容器删除后配置丢失</span></span><br><span class="line"><span class="string">-p</span> <span class="number">53</span><span class="string">:53/tcp</span> <span class="string">-p</span> <span class="number">53</span><span class="string">:53/udp</span> <span class="string">\</span> <span class="comment">#映射 DNS 服务端口（TCP+UDP）：主机 53 端口 &lt;-&gt; 容器 53 端口 53 是 DNS 协议默认端口，AdGuard Home 作为 DNS 服务器需监听此端口处理域名解析请求</span></span><br><span class="line"><span class="string">-p</span> <span class="number">67</span><span class="string">:67/udp</span> <span class="string">-p</span> <span class="number">68</span><span class="string">:68/udp</span> <span class="string">\</span> <span class="comment">#映射 DHCP 服务端口（UDP）：主机 67/68 端口 &lt;-&gt; 容器 67/68 端口 67 是 DHCP 服务器端口，68 是 DHCP 客户端端口，启用 AdGuard Home 的 DHCP 功能时需要</span></span><br><span class="line"><span class="string">-p</span> <span class="number">80</span><span class="string">:80/tcp</span> <span class="string">\</span> <span class="comment">#映射 HTTP 端口（TCP）：主机 80 端口 &lt;-&gt; 容器 80 端口 用于处理 HTTP 请求（如 Web 管理界面的 HTTP 访问、广告过滤的 HTTP 请求拦截等）</span></span><br><span class="line"><span class="string">-p</span> <span class="number">443</span><span class="string">:443/tcp</span> <span class="string">-p</span> <span class="number">443</span><span class="string">:443/udp</span> <span class="string">\</span> <span class="comment">#映射 HTTPS 及相关加密端口（TCP+UDP）：主机 443 端口 &lt;-&gt; 容器 443 端口 TCP 用于 HTTPS 协议（Web 管理界面的 HTTPS 访问），UDP 可能用于 DNS-over-HTTPS（DoH）等加密通信</span></span><br><span class="line"><span class="string">-p</span> <span class="number">3000</span><span class="string">:3000/tcp</span> <span class="string">\</span> <span class="comment">#映射初始配置界面端口（TCP）：主机 3000 端口 &lt;-&gt; 容器 3000 端口 首次启动 AdGuard Home 时，通过此端口访问初始化配置界面（如设置管理员账号、DNS 上游等）</span></span><br><span class="line"><span class="string">-p</span> <span class="number">853</span><span class="string">:853/tcp</span> <span class="string">-p</span> <span class="number">853</span><span class="string">:853/udp</span> <span class="string">\</span> <span class="comment">#映射 DNS-over-TLS/QUIC 端口（TCP+UDP）：主机 853 端口 &lt;-&gt; 容器 853 端口 853 是 DNS-over-TLS（DoT）的标准端口（TCP），同时也用于 DNS-over-QUIC（DoQ）（UDP，符合 RFC 规范）</span></span><br><span class="line"><span class="string">-p</span> <span class="number">5443</span><span class="string">:5443/tcp</span> <span class="string">-p</span> <span class="number">5443</span><span class="string">:5443/udp</span> <span class="string">\</span> <span class="comment">#映射备用加密服务端口（TCP+UDP）：主机 5443 端口 &lt;-&gt; 容器 5443 端口 常用于 DNS-over-HTTPS（DoH）的备用端口，或其他加密管理服务</span></span><br><span class="line"><span class="string">-p</span> <span class="number">6060</span><span class="string">:6060/tcp</span> <span class="string">\</span> <span class="comment">#映射性能分析端口（TCP）：主机 6060 端口 &lt;-&gt; 容器 6060 端口 对应配置中 pprof.port，用于 AdGuard Home 的性能分析和调试（如 Go 语言的 pprof 工具）</span></span><br><span class="line"><span class="string">-d</span> <span class="string">adguard/adguardhome</span> <span class="string">-d</span> <span class="comment">#表示后台运行容器；adguard/adguardhome 是使用的 Docker 镜像名称</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="控制指令"><a href="#控制指令" class="headerlink" title="控制指令"></a>控制指令</h3><p>启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start adguardhome </span><br></pre></td></tr></table></figure>
<p>停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop adguardhome</span><br></pre></td></tr></table></figure>
<p>删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> adguardhome</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-3"><ol>
<li>安装<a target="_blank" rel="noopener" href="https://adaiblog.github.io/posts/docker.html">docker和Docker-Composr</a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> adguardhome &amp;&amp; <span class="built_in">cd</span> adguardhome</span><br></pre></td></tr></table></figure></li>
<li>创建 docker-compose.yml<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano docker-compose.yml</span><br></pre></td></tr></table></figure></li>
<li>编写<strong>docker-compose.yml</strong><kbd>Ctrl</kbd> + <kbd>X</kbd>按<kbd>Y</kbd>，<kbd>Enter</kbd>保存<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3&#x27;</span>  <span class="comment"># 指定Docker Compose文件格式版本（v3兼容大多数现代Docker环境）</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  adguardhome:  <span class="comment"># 定义服务名称为adguardhome</span></span><br><span class="line">    image: adguard/adguardhome:latest  <span class="comment"># 使用AdGuard Home官方最新镜像</span></span><br><span class="line">    container_name: adguardhome  <span class="comment"># 指定容器名称，便于通过名称管理（如启动、停止）</span></span><br><span class="line">    restart: unless-stopped  <span class="comment"># 容器重启策略：除非手动停止，否则退出后自动重启（保证服务持续运行）</span></span><br><span class="line">    <span class="comment"># 使用命名卷存储数据，无需手动创建主机目录，由Docker自动管理</span></span><br><span class="line">    volumes:</span><br><span class="line">      - adguard_work:/opt/adguardhome/work  <span class="comment"># 命名卷adguard_work映射到容器工作目录：</span></span><br><span class="line">                                            <span class="comment"># 存储过滤规则、查询日志、缓存等动态数据，数据持久化且独立于容器生命周期</span></span><br><span class="line">      - adguard_conf:/opt/adguardhome/conf  <span class="comment"># 命名卷adguard_conf映射到容器配置目录：</span></span><br><span class="line">                                            <span class="comment"># 存储核心配置文件（如AdGuardHome.yaml），确保配置不丢失</span></span><br><span class="line">    ports:  <span class="comment"># 端口映射（主机端口:容器端口），按需保留或删除</span></span><br><span class="line">      - <span class="string">&quot;53:53/tcp&quot;</span>     <span class="comment"># 普通DNS服务（TCP协议）</span></span><br><span class="line">      - <span class="string">&quot;53:53/udp&quot;</span>     <span class="comment"># 普通DNS服务（UDP协议，DNS主要使用UDP）</span></span><br><span class="line">      - <span class="string">&quot;67:67/udp&quot;</span>     <span class="comment"># DHCP服务器端口（如需用AdGuard作为DHCP服务器则保留）</span></span><br><span class="line">      - <span class="string">&quot;68:68/udp&quot;</span>     <span class="comment"># DHCP客户端端口（配合DHCP服务器使用）</span></span><br><span class="line">      - <span class="string">&quot;80:80/tcp&quot;</span>     <span class="comment"># HTTP端口：用于Web管理界面访问、广告过滤的HTTP请求拦截</span></span><br><span class="line">      - <span class="string">&quot;443:443/tcp&quot;</span>   <span class="comment"># HTTPS端口：用于加密管理界面访问、DNS-over-HTTPS（DoH）服务</span></span><br><span class="line">      - <span class="string">&quot;443:443/udp&quot;</span>   <span class="comment"># 443端口UDP：支持DoH相关的UDP通信</span></span><br><span class="line">      - <span class="string">&quot;3000:3000/tcp&quot;</span> <span class="comment"># 初始化配置端口：首次启动时通过此端口访问设置界面（配置完成后可关闭）</span></span><br><span class="line">      - <span class="string">&quot;853:853/tcp&quot;</span>   <span class="comment"># DNS-over-TLS（DoT）服务端口（加密DNS协议）</span></span><br><span class="line">      - <span class="string">&quot;853:853/udp&quot;</span>   <span class="comment"># DNS-over-QUIC（DoQ）服务端口（基于QUIC的加密DNS）</span></span><br><span class="line">      - <span class="string">&quot;5443:5443/tcp&quot;</span> <span class="comment"># DNSCrypt服务端口（另一种加密DNS协议）</span></span><br><span class="line">      - <span class="string">&quot;5443:5443/udp&quot;</span> <span class="comment"># DNSCrypt服务的UDP端口</span></span><br><span class="line">      - <span class="string">&quot;6060:6060/tcp&quot;</span> <span class="comment"># 调试端口：用于性能分析（如Go语言pprof工具），非必要可删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义命名卷（Docker会自动在宿主机创建并管理这些卷的存储路径，通常在/var/lib/docker/volumes/）</span></span><br><span class="line">volumes:</span><br><span class="line">  adguard_work:  <span class="comment"># 卷名称：对应容器内的工作目录，存储动态数据</span></span><br><span class="line">  adguard_conf:  <span class="comment"># 卷名称：对应容器内的配置目录，存储核心配置</span></span><br></pre></td></tr></table></figure></li>
<li>启动 AdGuard Home</li>
</ol>
<ul>
<li>启动容器<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li>
<li>查看容器状态<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<h2 id="首次配置"><a href="#首次配置" class="headerlink" title="首次配置"></a>首次配置</h2><h3 id="1-访问管理界面"><a href="#1-访问管理界面" class="headerlink" title="1. 访问管理界面"></a>1. 访问管理界面</h3><ul>
<li>​<strong>本地访问</strong>: <code>http://主机IP地址:3000</code>  </li>
<li>​<strong>远程访问</strong>: <code>http://&lt;你的服务器IP&gt;:3000</code></li>
</ul>
<h3 id="2-初始设置步骤"><a href="#2-初始设置步骤" class="headerlink" title="2. 初始设置步骤"></a>2. 初始设置步骤</h3><ol>
<li>选择语言（如中文），点击 ​<strong>Next</strong>。  </li>
<li>阅读并接受服务条款，点击 ​<strong>Next</strong>。  </li>
<li>设置管理员账户的用户名和密码。  </li>
<li>完成配置后登录管理后台。</li>
</ol>
<h2 id="关键配置说明"><a href="#关键配置说明" class="headerlink" title="关键配置说明"></a>关键配置说明</h2><h3 id="1-广告拦截规则"><a href="#1-广告拦截规则" class="headerlink" title="1. 广告拦截规则"></a>1. 广告拦截规则</h3><ul>
<li>​<strong>默认规则</strong>：系统已预装基础广告过滤规则。  </li>
<li>​<strong>自定义规则</strong>:  <ul>
<li>进入 ​<strong>Filtering → Rulesets → Manual</strong>，输入规则链接（例如 <code>https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt</code>）。</li>
</ul>
</li>
</ul>
<h3 id="2-家长控制"><a href="#2-家长控制" class="headerlink" title="2. 家长控制"></a>2. 家长控制</h3><ul>
<li>​<strong>内容过滤</strong>:  <ul>
<li>在 ​<strong>Parent Control → Content Blocking</strong>​ 中勾选需要屏蔽的类别（如成人内容、赌博）。</li>
</ul>
</li>
<li>​<strong>屏幕时间管理</strong>:  <ul>
<li>在 ​<strong>Screen Time</strong>​ 中设置设备可用时间段（例如每天 18:00-22:00）。</li>
</ul>
</li>
</ul>
<h3 id="3-网络监控"><a href="#3-网络监控" class="headerlink" title="3. 网络监控"></a>3. 网络监控</h3><ul>
<li>查看实时流量：进入 ​<strong>Network → Dashboard</strong>​ 查看各设备的连接状态和 DNS 请求统计。</li>
</ul>
<h2 id="更新和卸载"><a href="#更新和卸载" class="headerlink" title="更新和卸载"></a>更新和卸载</h2><div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">自动更新</button><button type="button" class="tab " data-href="test4-2">Docker</button><button type="button" class="tab " data-href="test4-3">Docker-Compose</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 更新</span></span><br><span class="line"><span class="comment"># 1. 停止 AdGuard Home 服务 </span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">stop</span> <span class="string">AdGuardHome</span></span><br><span class="line"><span class="comment"># 2. 重新运行自动安装脚本(curl,wget,fetch)</span></span><br><span class="line"><span class="comment"># 3. 重启服务</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">start</span> <span class="string">AdGuardHome</span></span><br><span class="line"><span class="comment"># 4. 验证版本</span></span><br><span class="line"><span class="string">/opt/AdGuardHome/AdGuardHome</span> <span class="string">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 卸载</span></span><br><span class="line"><span class="comment"># 1. 停止并禁用服务</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">stop</span> <span class="string">AdGuardHome</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">disable</span> <span class="string">AdGuardHome</span></span><br><span class="line"><span class="comment"># 2. 执行卸载命令</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">/opt/AdGuardHome/AdGuardHome</span> <span class="string">-s</span> <span class="string">uninstall</span></span><br><span class="line"><span class="comment"># 3. 清理残留文件</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">/opt/AdGuardHome</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-2"><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 更新</span></span><br><span class="line"><span class="comment"># 1. 从 Docker Hub 中拉出新版本</span></span><br><span class="line"><span class="string">docker</span> <span class="string">pull</span> <span class="string">adguard/adguardhome</span> </span><br><span class="line"><span class="comment"># 2. 停止当前运行的容器</span></span><br><span class="line"><span class="string">docker</span> <span class="string">stop</span> <span class="string">adguardhome</span> </span><br><span class="line"><span class="comment"># 3. 移除当前运行的容器</span></span><br><span class="line"><span class="string">docker</span> <span class="string">rm</span> <span class="string">adguardhome</span> </span><br><span class="line"><span class="comment"># 4. 再次创建并运行容器，如果之前自定义过端口或挂载目录，重新创建时务必保持参数一致，否则可能导致配置或数据丢失</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 卸载</span></span><br><span class="line"><span class="comment"># 1. 停止当前运行的容器</span></span><br><span class="line"><span class="string">docker</span> <span class="string">stop</span> <span class="string">adguardhome</span> </span><br><span class="line"><span class="comment"># 2. 移除当前运行的容器</span></span><br><span class="line"><span class="string">docker</span> <span class="string">rm</span> <span class="string">adguardhome</span> </span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test4-3"><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 更新</span></span><br><span class="line"><span class="comment"># 1. 拉取最新镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">pull</span> </span><br><span class="line"><span class="comment"># 2. 重新部署容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">up</span> <span class="string">-d</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">### 卸载</span></span><br><span class="line"><span class="comment"># 进入存放adguard home的docker compose文件夹</span></span><br><span class="line"><span class="comment"># 基础删除（保留数据卷，仅删除容器和网络）</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">down</span> </span><br><span class="line"><span class="comment">#彻底删除（包括数据卷，数据会丢失）</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">down</span> <span class="string">-v</span> </span><br><span class="line"><span class="comment">#额外清理（删除未使用的镜像）</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">down</span> <span class="string">--rmi</span> <span class="string">all</span> </span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>



<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="1-无法访问管理界面"><a href="#1-无法访问管理界面" class="headerlink" title="1. 无法访问管理界面"></a>1. 无法访问管理界面</h3><p>开放防火墙端口  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ufw allow 3000/tcp  </span><br><span class="line"><span class="built_in">sudo</span> ufw reload  </span><br></pre></td></tr></table></figure>
<h3 id="2-集成到路由器"><a href="#2-集成到路由器" class="headerlink" title="2. 集成到路由器"></a>2. 集成到路由器</h3><ul>
<li>在路由器设置中将 DNS 服务器地址指向 AdGuard Home 的 IP（例如 <code>192.168.1.100:53</code>）。</li>
</ul>
<p><strong>参考文档</strong>:<br><a target="_blank" rel="noopener" href="https://adguardhome.org/docs/">AdGuard Home 官方文档</a>  </p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/adai.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/adai.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">阿呆</div><div class="post-copyright__author_desc">生活如此多娇</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.adaiblog.github.io/posts/adguardhome.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.adaiblog.github.io/posts/adguardhome.html')">家庭网络级解决方案:AdguardHome</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/%5Cimg%5Cwechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/%5Cimg%5Cwechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.adaiblog.github.io/posts/adguardhome.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.adaiblog.github.io" target="_blank">阿呆的博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>服务器<span class="categoryesPageCount">9</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/Docker/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Docker<span class="tagsPageCount">7</span></a></div></div><div class="post_share"><div class="social-share" data-image="/img/posts/assistant/homeassistant.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/alist.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/alist/alist.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">一站式聚合多平台存储的利器：OpenList</div></div></a></div><div class="next-post pull-right"><a href="/posts/gongbaojiding.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/food/gongbaojiding.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">宫保鸡丁</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/github.html" title="解决无法访Github问题"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/github/github.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-11-28</div><div class="title">解决无法访Github问题</div></div></a></div><div><a href="/posts/docker.html" title="从0学习使用Docker"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/docker/docker.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-11-01</div><div class="title">从0学习使用Docker</div></div></a></div><div><a href="/posts/teamspeak.html" title="赛事级语音聊天软件Teamspeak部署使用"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/teamspeak/teamspeak.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-11-25</div><div class="title">赛事级语音聊天软件Teamspeak部署使用</div></div></a></div><div><a href="/posts/rsshub.html" title="RSSHub"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/rsshub.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-22</div><div class="title">RSSHub</div></div></a></div><div><a href="/posts/mumble.html" title="语音开黑软件Mumble的部署与使用"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/mumble/mumble.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-11-08</div><div class="title">语音开黑软件Mumble的部署与使用</div></div></a></div><div><a href="/posts/immich.html" title="immich自托管照片和视频管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/posts/immich.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-28</div><div class="title">immich自托管照片和视频管理</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8-Debian-%E7%B3%BB%E7%BB%9F%E4%B8%8A%E6%90%AD%E5%BB%BA-AdGuard-Home-%E7%9A%84%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">在 Debian 系统上搭建 AdGuard Home 的完整教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.1.</span> <span class="toc-text">环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 系统要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%E5%8C%85"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 更新系统包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-AdGuard-Home"><span class="toc-number">1.2.</span> <span class="toc-text">部署 AdGuard Home</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BD-AdGuard-Home"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 下载 AdGuard Home</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%89%E6%8B%A9%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">1. 选择自动安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A6%82%E6%9E%9C%E7%B3%BB%E7%BB%9F%E5%90%AF%E7%94%A8%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8C%E9%9C%80%E6%89%8B%E5%8A%A8%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">2. 如果系统启用防火墙，需手动开放端口：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4"><span class="toc-number">1.2.4.</span> <span class="toc-text">控制指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E6%AC%A1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">首次配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 访问管理界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9D%E5%A7%8B%E8%AE%BE%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 初始设置步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-number">1.4.</span> <span class="toc-text">关键配置说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA%E8%A7%84%E5%88%99"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 广告拦截规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%B6%E9%95%BF%E6%8E%A7%E5%88%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 家长控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 网络监控</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%92%8C%E5%8D%B8%E8%BD%BD"><span class="toc-number">1.5.</span> <span class="toc-text">更新和卸载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.6.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 无法访问管理界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%9B%86%E6%88%90%E5%88%B0%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 集成到路由器</span></a></li></ol></li></ol></li></ol></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2026 By 阿呆</div><div id="workboard"><div id="runtimeTextTip"></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">60</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">12</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/atom.xml"><i class="anzhiyufont anzhiyu-icon-rss faa-tada" style="font-size: 0.9em;"></i><span> RSS订阅</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/collect/"><i class="anzhiyufont anzhiyu-icon-cube faa-tada" style="font-size: 0.9em;"></i><span> 藏宝阁</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-inbox faa-tada" style="font-size: 0.9em;"></i><span> 好物</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/reward/"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill faa-tada" style="font-size: 0.9em;"></i><span> 赞助名单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 更多链接</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight, 500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="9387336205" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/9387336205&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("10/26/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "";
        img.alt = "";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-NCXTYTWYNM', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>